# Replication vs Clustering
## Replication
- 여러 개의 DB를 권한에 따라 수직적인 구조로 구축하는 방식으로 Master Node는 쓰기 작업만을, Slave Node는 읽기 작업만을 처리한다. 비동기방식으로 노드들간의 데이터를 동기화 한다.
### 처리방식
1. Master 노드에 쓰기 트랜잭션 수행
2. Master 노드는 데이터를 저장하고 트랜잭션에 대한 로그 기록
3. Master 노드의 로그파일을 Replay Log 파일에 복사 
4. Slave 노드의 SQL Thread는 파일을 한 줄씩 읽으며 데이터를 저장

### 장점, 단점
- 장정
	- DB요청의 대부분이 읽기 작업이기 때문에 성능을 높일 수 있다.
	- 비동기 방식으로, 지연시간이 거의 없다.
- 단점
	- 노드들 간의 데이터 동기화가 보장되지 않아 일관성있는 데이터를 얻지 못할 수 있다. 
	- Master 노드가 다운되면 복구 및 대처가 까다롭다.

<br />

## Clustering
- 여러개의 DB를 수평적인 구조로 구축하는 방식, 분산환경으로 구성되어 신뢰도가 높다.
- 동기 방식으로 노드들간의 데이터를 동기화
### 처리방식
1.  1개의 노드에 쓰기 트랜잭션 수행, COMMIT 실행
2. 실제 디스크에 내용을 쓰기 전에 다른 노드로 데이터의 복제 요청
3. 다른 노드에서 복제 요청을 수락했다는 신호를 보내고, 디스크에 쓰기 시작
4. 다른 노드로부터 신호를 받으면 실제 디스크에 데이터 저장
### 장점, 단점
- 장점
	- 노드들 간의 데이터를 동기화 하여 항상 일관성있는 데이터를 얻을 수 있다.
	- 1개의 노드가 죽어도 다른 노드가 살아 있어 시스템을 계속 장애없이 운영할 수 있다.
- 단점 
	- 여러 노드들 간의 데이터를 동기화하는 시간이 필요하므로 Replication에 비해 쓰기 성능이 떨어진다.
	- 장애가 전파된 경우 처리가 까다로우며, 데이터 동기화에 의해 스케일링에 한계가 있다.
