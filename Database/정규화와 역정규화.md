# 정규화와 역정규화

## 1. 정규화(Normalization)

- 논리적 설계 단계에서 발생할 수 있는 종속으로 인한 이상(Anomaly) 현상의 문제점을 해결하기 위해, 속성들 간의 종속 관계를 분석하여 여러 개의 릴레이션으로 분해하는 과정

#### 1) 제1정규형

- 한 릴레이션을 구성하는 모든 도메인이 원자값만으로 구성되도록 하는 과정
- 데이터베이스에서는 검색, 삽입, 삭제 등 여러가지 작업이 튜플 단위로 이루어지기 때문에 튜플을 하나로 합쳐서 표현하면(한 도메인이 여러값을 갖는 경우) 원활하게 수행되지 못한다.

#### 2) 제2정규형

- 제1정규형을 만족하면서 릴레이션을 구성하는 모든 속성이 기본키에 완전 함수 종속되도록 분해하는 과정, 즉 부분 함수 종속을 제거하는 과정

- [고객주문(<u>고객번호</u>, <u>제품번호</u>, 제품명, 주문량)]

  ==> [주문량(<u>고객번호</u>, <u>제품번호</u>, 주문량)], [제품(<u>제품번호</u>, 제품명)]

#### 3) 제3정규형

- 제2정규형을 만족하면서 릴레이션을 구성하는 속성들 간에 이행적 함수 종속관계를 분해하는 과정
- [수강(<u>학번</u>, 전공, 담당교수)] ==> [학생(<u>학번</u>, 전공)], [교수(<u>전공</u>, 담당교수)]

#### 4) 보이스-코드 정규형(BCNF: Boyce-Codd Normal Form)

- 제3정규형을 만족하면서, 릴레이션에서 모든 결정자가 후보키가 되도록 하는 과정

- 보이스코드 정규형을 만족하면 제3정규형이 되지만, 역은 성립하지 않는다.

- [수강과목(<u>학번</u>, <u>과목명</u>, 교수번호, 학점)]

  ==> [교수(<u>교수번호</u>, 과목명)], [수강과목(<u>학번</u>, <u>교수번호</u>, 학점)]

#### 5) 제4정규형

- 릴레이션에서 다치 종속(MVD, Multivalued Dependency) 관계가 성립되는 경우 분해하는 정규형

  - 다치 종속: 하나의 속성값이 대응되는 속성의 집합을 결정하는 종속 관계, A→→B

- 과목명→→강사, 과목명→→교재일 경우(하나의 과목에 여러명의 강사와 여러종류의 교재가 존재)

  ==> [수업(<u>과목명</u>, <u>강사</u>)], [교재(<u>과목명</u>, <u>교재</u>)] 

#### 6) 제5정규형

- 릴레이션에 존재하는 조인 종속(Join Dependency)이 후보키를 통해서만 성립이 되도록 하는 정규형
- 조인종속: 원래의 릴레이션을 분해한 뒤 자연 조인한 결과가 원래의 릴레이션과 같은 결과가 나오는 종속성

- 과목명→→강사, 과목명→→교재일 경우(단, 강사와 교재가 연관이 있을 경우)

  ==> [수업(<u>과목명</u>, <u>강사</u>)], [사용교재(<u>강사</u>, <u>교재</u>)], [교재(<u>과목명</u>, <u>교재</u>)] 

<br/>

## 2. 역정규화

- 정규화된 릴레이션은 외래키를 이용해 자주 참조하는 현상이 발생하는데 이떄 성능 저하의 가능성이 있다.
- 정규화된 릴레이션을 물리적 데이터 모델링 과정에서 성능을 향상시키기 위해 중복을 허용하고라도 다시 통합하거나 분할하여 구조를 재조정하는 것

#### 1) 릴레이션 역정규화

- 잦은 참조로 인한 성능저하 방지를 위해 병합
- 자주 사용되지 않는 속성이나 튜플을 추가로 스캔하지 않기 위해 분할
  - 수직분할: 자주 사용하지 않는 속성을 분할
  - 수평분할: 자주 사용하지 않는 튜플을 분할

#### 2) 속성 역정규화

- 성능을 향상시키기 위해 속성 단위로 추가하거나 필요한 속성을 만드는 것
  - 속성추가: A의 외래키에 의해 B의 특정 속성값을 자주 참조하는 경우 B의 속성을 A릴레이션에 추가
  - 파생속성 추가: 릴레이션에 파생속성(ex.sum, count 등)을 추가

<br/>

#### 생각해보기!

- ##### 정규화와 역정규화가 필요한 이유가 무엇인가요?

  - 정규화는 데이터의 중복을 최소화 하여 삽입, 삭제, 갱신 과정에서 발생하는 이상현상을 방지하기 위해 필요하고, 역정규화는 정규화로 인해 참조현상이 자주 발생하여 성능이 저하되는 정보의 경우 중복을 허용하고라도 릴레이션을 통합하거나 분할하기 위해 필요합니다.

- ##### 적절한 정규화를 위해 어떻게 프로젝트를 진행하겠는가?

  - 먼저 팀원들과 성능의 기대치를 정해놓는 것이 중요하다고 생각합니다. 정규화나 역정규화같은 경우 무조건 어떤게 낫다고 할 수 없으므로 성능 저하의 최저점을 정해놓고 이상치의 성능이 나오지 않는다면 역정규화를 하는 방법으로 조정할 필요가 있다고 생각합니다.

- ##### 각 정규화 단계를 설명해주세요

  - 제1정규화는 각 도메인이 원자값을 가지고 있어야합니다.
  - 제2정규화는 부분함수종속을 없애도록 해야됩니다.
  - 제3정규화는 이행함수종속을 없애는 것입니다.
  - 보이스코드 정규화는 결정자가 후보키가 되어야합니다.
  - 제4정규화는 다치종속을 분해하는 것입니다.
  - 제5정규화는 조인종속이 후보키를 통해서만 이루어지도록 하는 것입니다.

- ##### 다치종속이 어떤 것인지 예시를 들어 설명해주세요

  - 다치종속은 하나의 속성이 다른 속성의 집합을 결정하는 것입니다. 예를 들어 저라는 지원자의 가능 프로그래밍 언어는 java, sql, javascript라는 집합을 가지고 있는 것을 말할 수 있습니다. 또한 저라는 지원자의 가능 언어로는 한국어, 영어가 있다고도 할 수 있습니다.