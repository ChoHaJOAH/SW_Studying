# CPU스케줄링

#### CPU 스케줄러

: 여러 프로세스의 상황을 고려하여 CPU와 시스템 자원의 배정을 결정

## 1. 선점형 스케줄링과 비선점형 스케줄링

#### 선점형 스케줄링

- 실행 상태에 있는 프로세스의 작업을 중단시키고 새로운 작업을 시작할 수 있는 방식
- 하나의 프로세스가 CPU를 독점할 수 없기 때문에 빠른 응답 시간을 요구하는 대화형 시스템이나 시분할 시스템에 적합
- 문맥교환의 오버헤드가 많다.

#### 비선점형 스케줄링

- 실행중인 프로세스가 종료되거나 자발적으로 대기상태에 들어가기 전까지는 계속 실행되는 방식
- 선점형 스케줄링보다 스케줄러의 작업량이 적고 문맥 교환에 의한 낭비도 적음
- 전체 시스템의 처리율이 떨어짐

![](../img/프로세스와스레드_4.png)

<br />

## 2. 스케줄링 알고리즘

| 구분              | 스케줄링 종류                                 |
| ----------------- | --------------------------------------------- |
| 비선점형 알고리즘 | FCFS, SJF, HRN                                |
| 선점형 알고리즘   | 라운드 로빈, SRT, 다단계 큐, 다단계 피드백 큐 |
| 둘 다 가능        | 우선순위                                      |

#### 스케줄링 알고리즘의 평가 기준

- CPU 사용률: 전체 시스템의 동작 시간 중 CPU가 사용된 시간을 측정하는 방법

- 처리량: 단위 시간당 작업을 마친 프로세스의 수

- 대기 시간: 프로세스가 생성된 후 실행되기 전까지 대기하는 시간

- 응답 시간: 첫 작업을 시작한 후 첫 번째 출력(반응)이 나오기까지의 시간

- 실행 시간: 프로세스 작업이 시작된 후 종료되기까지의 시간

- 반환 시간: 대기 시간을 포함하여 실행이 종료될 때까지의 시간

- #### 평균 대기 시간 :  모든 프로세스의 대기 시간을 합한 뒤 프로세스의 수로 나눈 값

### 1) FCFS(FIrst Come First Served) 스케줄링

- 준비 큐에 도착한 순서대로 CPU를 할당하는 비선점형 방식
- 큐가 하나라 모든 프로세스는 우선순위가 동일

### 2) SJF(Shortest Job First, 최단 작업 우선) 스케줄링

- 준비 큐에 있는 프로세스 중에서 실행 시간이 가장 짧은 작업부터 CPU를 할당하는 비선점형 방식

- 운영체제가 프로세스의 종료 시간을 정확하게 예측하기 어려움

- 작업시간이 긴 프로세스는 계속 뒤로 밀려 아사(starvation)현상 발생

- #### Aging(나이먹기)
  - 아사 현상의 완화 방법, 프로세스가 양보할 수 있는 상한선을 정하는 방식

### 3) HRN(Highest Response-ratio Next) 스케줄링

- SJF의 아사 현상을 해결하기 위해 만들어진 비선점형 알고리즘
- 우선순위=(대기시간+CPU 사용 시간)/CPU 사용 시간

### 4) 라운드 로빈 스케줄링

- 한 프로세스가 할당받은 시간(타임 슬라이스) 동안 작업을 하다가 작업을 완료하지 못하면 준비 큐의 맨 뒤로 가서 자기 차례를 기다리는 방식
- 선점형 알고리즘 중 가장 단순하고 대표적인 방식

#### 타임 슬라이스의 크기와 문맥 교환

- 라운드 로빈 스케줄링이 효과적으로 작동하려면 문맥 교환에 따른 추가 시간을 고려하여 타임 슬라이스를 적절히 설정
- 타임슬라이스가 작은 경우, 문맥 교환이 너무 자주 일어나 문맥 교환에 걸리는 시간이 실제 작업 시간보다 상대적으로 커진다.

### 5) SRT(Shrtest Remaining Time) 스케줄링

- 기본적으로 라운드 로빈 스케줄링을 사용하지만, CPU를 할당받을 프로세스를 선택 할 때 남아 있는 작업 시간이 가장 적은 프로세스를 선택
- 아사 현상 발생 가능

### 6) 우선순위 스케줄링

- 프로세스의 중요도에 따른 우선순위를 반영한 스케줄링 알고리즘

