# 메모리 할당

## 단일 프로그래밍 환경에서의 메모리 할당

### 1. 메모리 오버레이

- 프로그램 크기가 실제 메모리보다 클 때 전체 프로그램을 메모리에 가져오는 대신 적당한 크기로 잘라서 가져오는 기법
- 한정된 메모리에서 필요한 모듈만 메모리에 올라와 실행

### 2. 스왑 영역

- 메모리가 모자라서 쫓겨난 프로세스를 저장장치의 특별한 공간에 모아두는 영역
- 메모리에서 쫓겨났다가 다시 돌아가는 데이터가 머무는 곳이기때문에 저장장치는 장소만 빌려주고 메모리 관리자가 관리
- 사용자는 실제 메모리의 크기와 스왑 영역의 크기를 합쳐서 전체 메모리로 인식하고 사용

#### 스왑인

: 스왑 영역에서 메모리로 데이터를 가져오는 작업

#### 스왑아웃

: 메모리에서 스왑 영역으로 데이터를 내보내는 작업

<br />

## 다중 프로그래밍 환경에서의 메모리 할당

### 1. 메모리 분할 방식

: 메모리에 여러 개의 프로세스를 배치하는 방법

#### 가변 분할 방식

- 프로세스의 크기에 따라 메모리를 나누는 것
- 메모리의 영역이 각각 다름
- 연속 메모리 할당
- 장점
  - 프로세스를 한덩어리로 처리하여 하나의 프로세스를 연속된 공간에 배치
- 단점
  - 비어 있는 공간을 하나로 합쳐야 하며, 이 과정에서 다른 프로세스의 자리도 옮겨야 하므로 메모리 관리가 복잡함

#### 고정 분할 방식

- 프로세스의 크기와 상관없이 메모리를 같은 크기로 나누는 것

- 큰 프로세스가 메모리에 올라오면 여러 조각으로 나누어 배치
- 비연속 메모리 할당

- 장점
  - 메모리를 일정한 크기로 나누어 관리하기 때문에 메모리 관리가 수월(메모리 통합같은 부가적인 작업을 할 필요가 없음)
- 단점
  - 쓸모없는 공간으로 인해 메모리 낭비가 발생할 수 있음

### 2. 가변 분할 방식의 메모리 관리

#### 외부 단편화

- 메모리 사이 빈 공간 보다 큰 프로세스가 들어와 메모리를 배정하지 못했을 때 생기는 작은 공간
- 해결방법
  - 메모리 배치 방식: 작은 조각이 발생하지 않도록 프로세스를 배치하는 것
  - 조각 모음: 조각이 발생했을 때 작은 조각들을 모아서 하나의 큰 덩어리로 만드는 작업

#### 메모리 배치 방식

- 최초 배치, First fit
  - 프로세스를 배치할 때 메모리에서 첫번째로 발견한 적재 가능한 공간에 배치하는 방법
  - 빈 공간을 찾아다닐 필요 없음
- 최적 배치, Best fit
  - 빈 공간을 모두 확인한 후 가능한 크기 중 가장 작은 공간에 배치하는 방법
  - 딱 맞을 경우 단편화가 일어나지 않음
  - 아주 작은 조각을 만들어 내는 단점이 있음
- 최악 배치, Worst fit
  - 빈 공간을 모두 확인한 후 가장 큰 공간에 배치하는 방법
  - 배치 후 남은 공간이 크기 때문에 쓸모가 있다.
  - 빈공간의 크기가 점점 줄어들면 작음 조각을 만들어냄

### 3. 고정 분할 방식의 메모리 관리

#### 내부 단편화

- 메모리 조각에 프로세스를 배치하고 공간이 남는 현상

### 4. 가변 분할 방식 vs 고정 분할 방식

| 구분        | 가변 분할 방식                   | 고정 분할 방식             |
| ----------- | -------------------------------- | -------------------------- |
| 메모리 단위 | 세그먼테이션                     | 페이징                     |
| 특징        | 연속 메모리 할당                 | 비연속 메모리 할당         |
| 장점        | 프로세스를 한 덩어리로 관리 가능 | 메모리 관리가 편리         |
| 단점        | 빈 공간의 관리가 어려움          | 프로세스가 분할되어 처리됨 |
| 단편화      | 외부 단편화                      | 내부 단편화                |

### 5. 버디 시스템

1. 프로세스의 크기에 맞게 메모리를 1/2로 자르고 프로세스를 메모리에 배치
2. 나뉜 메모리의 각 구역에는 프로세스가 1개만 들어감
3. 프로세스가 종료되면 주변의 빈 조각과 합쳐서 하나의 큰 덩어리를 만듦

![](../img/물리메모리관리_1.png)

- 가변 분할 방식 처럼 메모리가 프로세스 크기대로 나뉨
- 고정 분할 방식처럼 하나의 구역에 다른 프로세스가 들어갈 수 없고, 메모리의 한 구역 내부에 조각이 생겨 내부 단편화 발생
- 비슷한 크기의 조각이 서로 모여 작은 조각을 통합하여 큰 조각을 만들기 쉬움