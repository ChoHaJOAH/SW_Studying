# 임계 구역 Critical Section

- 임계 자원 critical resource: 두 프로세스가 동시에 사용할 수 없는 공유 자원
- 파일, 입출력, 공유 데이터 등 원자적으로 실행할 필요가 있는 명령문 또는 코드의 일부 영역
- 어떤 프로세스가 임계구역에 들어가면 다른 프로세스는 임계구역 밖에서 기다려야 하며 임계구역의 프로세스가 나와야 들어갈 수 있음

<br />

## 1. 임계 구역 문제

- 만약 하나의 스레드가 공유 데이터의 값을 변경하는 시점에 다른 스레드가 그 값을 읽기 시도한다면 예측하지 못한 결과가 초래한다.

  => 공유 데이터의 접근에 동기화(공유자원을 동시에 사용하지 못하게 실행을 제어 하는 방법)를 해줘야 한다.

```
acquireLock();
Process Critical Section
releaseLock();
```

## <br /> 2. 생산자, 소비자 문제

##### 생산자, 소비자 문제

- 운영체제에서 비동기적으로 수행하는 모델
- 생산자 프로세스가 생산한 정보를 소비자 프로세스가 소비하는 형태
- 소비자가 데이터 받을 준비를 마칠 때까지 생산자는 버퍼로 데이터 전송

![](D:/Hajung/git/SW_Studying/img/프로세스동기화_2.png)

##### 경쟁 상태

- 여러 프로세스가 동시에 공유 데이터에 접근 시, 접근 순서에 따라 실행 결과 달라지는 상황 말함.
- 장치나 시스템이 둘 이상의 연산 동시 실행 시, 어느 프로세스를 마지막으로 수행한 후 결과를 저장했느냐에 따라 오류가 발생하므로 적절한 순서에 따라 수행 해야 함
- 경쟁 상태의 예방
  - 병행 프로세스들을 동기화해야 함(임계 영역 이용한 상호배제로 구현)

<br />

## 3. 임계 구역 해결 조건

### 1) 상호 배제 Mutual Exclusion

: 한 프로세스가 임계구역에 들어가면 다른 프로세스는 임계구역에 들어갈 수 없는 것

### 2) 한정 대기 Bounded Waiting

: 어떤 프로세스도 무한 대기하지 않아야 함

### 3) 진행의 융통성 Progress Flexibility

: 한 프로세스가 다른 프로세스의 진행을 방해해서는 안된다는 것